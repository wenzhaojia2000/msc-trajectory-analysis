<!DOCTYPE html>
<html>
   <head>
      <title>Quantics Analysis GUI</title>
      <meta charset="utf-8" />
      <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
      <link href="stylesheet.css" rel="stylesheet" type="text/css" />
   </head>
   <body>
      <h1 id="title">Quantics Analysis GUI &mdash; User documentation</h1>
      <p>The Quantics Analysis GUI is an alternative for using the existing quantics analysis commands on a command line interface. It serves as an easier and more user-friendly way to perfrom analysis on the output of a quantics simulation.</p>

      <h2 id="getting_started">Getting started</h2>
      <p>The GUI requires python &geq; 3.10 and the packages <u>PyQt5</u> and <u>pyqtgraph</u> to function (installing pyqtgraph should also install numpy, which is also required). If you do not yet have python installed, it is recommended to use <a href="https://docs.conda.io/projects/conda/en/stable/user-guide/install/linux.html">conda</a>. A conda environment with the prerequisites is available by navigating to <code>%QUANTICS_DIR%/source/analyse/analysis_gui/</code> and executing</p>
      <pre>
conda env update -f environment.yml</pre>
      <p>Open the GUI by using</p>
      <pre>
python3 %QUANTICS_DIR%/source/analyse/quantics_analysis_gui.py</pre>
      <p>If you do not wish to use conda, you can install the required packages directly using pip:</p>
      <pre>
python3 -m pip install PyQt5 pyqtgraph</pre>

      <h3 id="opening_directory">Opening a directory</h3>
      <p>After successfully using the <code>quantics</code> command, a folder should have been generated with output files. To navigate to the folder in the GUI, you can click <code>File</code> &rightarrow; <code>Open Directory</code>, type <kbd>Ctrl</kbd> + <kbd>O</kbd>, or the click on the button in the top-right corner. Alternatively, you can paste the directory directly into the 'Current directory' line.</p>
      
      <h3 id="perform_analysis">Performing an analysis</h3>
      <p>On the left side of the screen, various analyses have been split into different sections. To perform an analysis, click on one of the tabs (namely Analyse Convergence, Analyse System, etc.) and click on the radio button with the analysis you want. There may be an additional options box shown with more controls&mdash;you can change these to be the settings you want. When you are ready, click <code>Continue</code>.</p>

      <p>The output is on the right side of the screen. Depending on the analysis chosen, the output is written to the plot widget or the text widget. Most analyses change the plot widget, in which case the text widget shows the standard output (<code>stdout</code>) of the command if you had used it on the command line, or the <code>.log</code> file generated from the command. You can switch between the two at the bottom of the screen.</p>

      <p>Once you have finished with analysis, you may wish to delete extra files generated by the GUI (see <a href="#cleanup_directory">Cleanup Directory</a>).</p>

      <h3 id="coord_select">Coordinate selection</h3>
      <p>In order to plot multi-dimensional data, a 'cut' of the data may have to be performed. This is done using the coordinate selection option in the extra options box. You can choose the degree of freedoms that are 'x' and 'y', then choose fixed values for the other DOFs. If 'x' and 'y' are selected, a contour plot is produced. If only 'x', a normal line graph.</p>

      <h3 id="further_info">Specific information on an analysis</h3>
      <p>You can hover over one of the analysis radio buttons to get an overview of what it does. If the message is in the form "Executes [command]", the GUI will internally call the quantics command. You can then look up information for that command in the <a href="../analyse.html">original analysis documentation</a>.</p>

      <h3 id="plot_widget">The plot widget</h3>
      <p>You can move the data in the plot by holding left-click and dragging around. To zoom in, right-click and drag horizontally to zoom the x-axis, vertically to zoom the y-axis, or diagonally for a combination. You may also use the middle mouse buttom for this purpose.</p>

      <p>Alternatively, right-click and click <code>Mouse mode</code> &rightarrow; <code>1 button</code>, which replaces the left-click with a zoom option; simply drag a box around the part of the graph you want to zoom into. To return to automatic sizing, right click and press <code>View all</code> or click the <code>A</code> in the bottom left of the widget.</p>

      <p>If you have the legend open (which it is by default), you can click on the lines in the legend to hide plotting for that line. This is useful if the plotted data overlaps heavily and you want to look at one line in particular, for example.</p>

      <h3 id="plot_widget">Animated plots</h3>
      <p>Some analysis options allow you to control time using the 'scrubber' at the bottom of the screen. You can also click the play button to automatically increase time in the plot. Control how fast this goes using the <code>Speed</code> button. This button also changes the framerate if you <a href="saving_files">save the video</a> as well.</p>

      <h2 id="context_menu">Context menus</h2>
      <p>Context menus are shown when right-clicking on the text widget or the plot widget.</p>

      <h3 id="change_title">Customising the plot widget</h3>
      <p>It is possible to change the some properties of the plot by right-clicking &rightarrow; <code>Plot Options</code>. In this sub-menu, you can change the title of the plot (<code>Custom title</code>), whether to show the legend (<code>Show legend</code>) as well as enabling the grid/changing its opacity (<code>Grid</code>).</p>

      <h3 id="saving_files">Saving files, images, and videos</h3>
      <p>You can save the text output in the text widget by right-clicking &rightarrow; <code>Save text</code>, or the raw numpy data in a plot with <code>Save .npy data</code>. A menu should pop up asking you the name and location of the file you want to save.</p>

      <p>In order to save an image of the current plot, right-click and choose <code>Export...</code> in the plot widget's context menu. Then you can choose whether to save as an image (png, jpg) or a vector graphic (svg) of the current window. In order to save a video, you must have ffmpeg installed, which can be obtained from your package manager, eg. for apt,</p>
      <pre>
sudo apt install ffmpeg</pre>
      <p>after which you can save similarly to the other options.</p>

      <p>To make images/videos larger or smaller, simply resize the window accordingly.</p>

      <h3 id="line_wrap">Line wrap</h3>
      <p>In the text widget, if there are too many characters on one line, a horizontal scroll bar will show up to see the rest of the line. If you don't want this, you can enable this option to split any long lines over multiple lines.</p>

      <h3 id="transformations">Transformations</h3>
      <p>A number of transformations can be applied to the current plot by right-clicking &rightarrow; <code>Plot Options</code> &rightarrow; <code>Transforms</code>. The most useful are log X, log Y and dy/dx.</p>

      <h2 id="options_menu">Options menu</h2>
      <p>The options menu is on the menu bar on the top of the GUI.</p>

      <h3 id="timeout">Timeout</h3>
      <p>When performing an analysis, the GUI calls the quantics analysis programs internally. The <i>timeout</i> option sets how long to GUI waits for the analysis program to finish before giving up. Note, this option only applies to the quantics analysis program and not any analysis the GUI does itself.</p>

      <h3 id="cleanup_directory">Cleanup directory</h3>
      <p>Some calls to quantics analysis programs leave data files for the GUI to read. These files are analysis output files (not to be confused with the output files from quantics), and are read by the GUI for plotting purposes. After an analysis is finished, these files are <b>not</b> removed automatically. If you wish to remove them, click <code>Options</code> &rightarrow; <code>Cleanup directory</code>. The GUI finds any analysis output files in the current directory deletes them (after asking for your permission, of course).</p>

      <h3 id="add_flags">Allow additional flags</h3>
      <p>For certain analyses, an options box may show up with more controls. In general, these toggle to flags and inputs to the corresponding quantics analysis program. However, not all options may be covered, and for technical users, you can manually input additional flags by using <code>Options</code> &rightarrow; <code>Allow additional flags</code>. An additional box will show at the bottom of the analysis toolbar for you to enter these extra options</p>

      <p>An example where this may be useful is if you want to use the <code>restart</code> file rather than the <code>psi</code> file. Select the relevant command, then type <code>-r</code> into the additional flags box, before continuing as normal.</p>

      <h3 id="no_command">No command mode</h3>
      <p>This option is convenient if you already have the quantics analysis output already, and want to show it in the GUI without calling the quantics analysis program again. If this option is on, the GUI will try to read the relevant file without calling the corresponding quantics program.</p>

      <p>This may be useful if the analysis program takes a long time to compute (especially for direct dynamics computations!). You can call the original command on the CLI, then wait in the background for it to finish. Once it has completed, navigate to the directory of the output file and select the relevant command in the GUI, then continue as normal in no command mode. The GUI should plot the output normally.</p>

      <p>For certain analyses, the extra options must be set correctly, eg. for the 1D density, the degree of freedom and state selected must match with the filename.</p>

   </body>
</html>